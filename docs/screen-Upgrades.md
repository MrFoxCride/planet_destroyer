# Screen – Upgrades

## 1. Description

Экран улучшений. Игрок тратит Cosmic Dust на постоянные глобальные апгрейды, которые усиливают все системы: скорость добычи, урон, доход, время поиска планет и т.д.

Все улучшения сохраняются между сессиями, работают немедленно после покупки, и имеют уровневую прогрессию.

---

## 2. UX/Game Design

- Вертикальный список апгрейдов
- Каждый апгрейд:
  - Название
  - Описание текущего эффекта
  - Значение следующего уровня
  - Стоимость следующего уровня
- Кнопка `Upgrade`
- Вверху — режим покупки: `x1 / x5 / MAX`
- Внизу — кнопка `Return to Field`

---

## 3. UI Elements

### 3.1. Upgrade Slot (1 на тип)
- Название: `"+X% Damage"` и т.п.
- Описание текущего уровня
- Превью следующего уровня
- Кнопка `Upgrade`
- Disabled, если не хватает Dust
- Бар прогресса (опционально)

### 3.2. Upgrade Mode Toggle
- Кнопка или селектор
- Опции: `x1`, `x5`, `MAX`
- Влияет на цену и получаемый бонус

### 3.3. HUD (Dust)
- Левый верхний угол
- Показывает текущий баланс Dust

### 3.4. Return to PlanetField Button
- Нижняя часть экрана
- Надпись: `"Return to Field"`
- Возврат на `PlanetField` через FSM

---

## 4. Entities & Logic

### 4.1. Upgrade Config Table
Каждое улучшение содержит:
- `upgradeId: string`
- `name: string`
- `description: string`
- `baseCost: number`
- `costCurve: 'exponential' | 'linear' | 'hybrid'`
- `effectFormula(level): number`
- `maxLevel?: number`

Определяется в external config (`upgradeConfig.js`)

### 4.2. Purchase Logic
- Проверка Dust
- Учитывает режим (x1/x5/MAX)
- Увеличивает level
- Списывает сумму

### 4.3. Application of Effects
- Все бонусы применяются глобально:
  - Урон оружия
  - Скорость добычи
  - Кол-во ресурсов
  - Время спауна планет
- Эффекты сразу начинают действовать

---

## 5. Events (Triggers)

| Событие              | Действие                                   |
|-----------------------|--------------------------------------------|
| `upgradeClick(id)`    | Покупка уровня, обновление UI              |
| `toggleUpgradeMode()` | Переключение x1/x5/MAX                     |
| `returnClick()`       | FSM → `PlanetField`                        |

---

## 6. Notes

- Все апгрейды сохраняются в save
- Влияние видно сразу — даже если игрок не возвращается в `PlanetField` моментально
- Некоторые апгрейды могут разблокироваться по условию (например, "уничтожь 10 планет")