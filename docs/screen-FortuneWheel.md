# Screen – FortuneWheel

## 1. Description

Экран колеса фортуны. Игрок может смотреть рекламу, чтобы получить вращение. После просмотра — одно вращение, которое даёт случайную награду: ресурсы, Magmaton или временные бусты. Это основной источник ad-based монетизации.

---

## 2. UX/Game Design

- Центр экрана — большое колесо (8–10 секторов)
- Каждая секция: иконка + название награды
- Кнопка `Watch Ad to Spin`:
  - запускает просмотр рекламы (1 просмотр = 1 спин)
  - заблокирована, если лимит исчерпан
- После рекламы появляется `Spin`-кнопка
- После спина — всплывает окно награды
- Опционально: cooldown между спинами

---

## 3. UI Elements

### 3.1. Reward Wheel
- Центр экрана (60% высоты)
- 8–10 сегментов:
  - `+500~5000 Dust`
  - `+2~10 Magmaton`
  - `x2 Damage (5 min)`
  - `-50% Craft Time (10 min)`
  - `+50% Resource Yield (15 min)`
- Анимация вращения:
  - ease-out
  - итог подсвечивается

### 3.2. Watch Ad Button
- Под колесом
- Надпись: `Watch Ad to Spin`
- Блокируется, если нет доступных показов
- Подсветка при доступности

### 3.3. Spin Button
- Появляется только после просмотра рекламы
- Нажатие — запускает вращение
- Исчезает после нажатия

### 3.4. Reward Popup
- Появляется после остановки колеса
- Показывает:
  - Название
  - Значение
  - Длительность (если буст)
- Анимация, свечение

### 3.5. Spin Cooldown Tracker (optional)
- Текст `Next spin available in 03:12`
- Появляется при лимите в день/час

### 3.6. Return Button
- Внизу экрана
- `"Return to Field"` → FSM → PlanetField

---

## 4. Entities & Logic

### 4.1. Wheel Segment Model
- `rewardType: 'dust' | 'magmaton' | 'boost'`
- `amountRange: [min, max]`
- `boostType?: 'x2dmg' | 'fasterCraft' | 'yieldBonus'`
- `duration?: number (ms)`
- `rarityWeight: number`

### 4.2. Boost Effects
- x2 Damage → на все атаки
- -50% Craft Time → на все оружия
- +50% Resource Yield → с планет и юнитов
- Бусты активируются сразу
- Хранятся глобально (`activeBoosts[]`)

### 4.3. Ad Gating
- Спин возможен только после `adWatched = true`
- После спина `adWatched → false`
- Ежедневный лимит (например, 5 в день)

---

## 5. Events (Triggers)

| Событие           | Действие                                 |
|--------------------|------------------------------------------|
| `watchAdClick()`   | Симулирует просмотр рекламы              |
| `spinClick()`      | Вращает колесо, определяет результат     |
| `rewardPopupClose` | Закрывает окно, сбрасывает состояние     |
| `returnClick()`    | FSM → PlanetField                        |

---

## 6. Notes

- Если буст уже активен, новый эффект продлевает таймер (не стакается)
- Можно предусмотреть отдельный экран `Boosts`, если список растёт
- Codex-имплементация может использовать `setTimeout` вместо рекламы